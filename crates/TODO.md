# TODO: 類似性検出ツールの改善課題

## 現在の問題

### 1. 警告の修正

- [ ] `crates/similarity-md/src/markdown_parser.rs:15` - 未使用変数 `section_counter` の修正
- [ ] その他のコンパイラ警告の解決

### 2. 形態素解析機能の完全実装

- [ ] 形態素解析辞書の自動ダウンロード機能
- [ ] デフォルト辞書の設定とドキュメント化
- [ ] 形態素解析が利用できない場合のフォールバック改善

### 3. パフォーマンスの最適化

- [ ] 大量のドキュメント処理時のメモリ使用量最適化
- [ ] 並列処理の改善（Rayon の活用）
- [ ] キャッシュ機能の追加

### 4. 日本語処理の精度向上

- [ ] より適切な日本語単語境界の検出
- [ ] 文字種混在テキスト（日本語+英語）の処理改善
- [ ] 句読点や記号の適切な処理

## 機能拡張

### 1. 新しい類似性指標

- [ ] セマンティック類似性（word2vec/BERT 等）
- [ ] 構造的類似性（Markdown の構造を考慮）
- [ ] コンテキスト類似性（周辺セクションとの関係）

### 2. 多言語対応

- [ ] 中国語の形態素解析サポート
- [ ] 韓国語の形態素解析サポート
- [ ] 言語自動検出機能

### 3. 出力形式の拡張

- [ ] HTML 形式での出力
- [ ] CSV 形式での出力
- [ ] 可視化機能（類似性マトリックス）

### 4. インタラクティブ機能

- [ ] Web UI の追加
- [ ] リアルタイム類似性検出
- [ ] 類似セクションのマージ提案機能

## コードの改善

### 1. テストの充実

- [ ] 日本語テキストの単体テスト追加
- [ ] 統合テストの拡充
- [ ] ベンチマークテストの改善

### 2. エラーハンドリング

- [ ] より詳細なエラーメッセージ
- [ ] 部分的な失敗時の継続処理
- [ ] ログ機能の追加

### 3. 設定の柔軟性

- [ ] 設定ファイル（TOML/YAML）のサポート
- [ ] プリセット設定の提供
- [ ] 動的な重み調整機能

## ドキュメント

### 1. 使用方法の詳細化

- [ ] 日本語での詳細な README
- [ ] 使用例の追加
- [ ] トラブルシューティングガイド

### 2. 開発者向けドキュメント

- [ ] API ドキュメントの充実
- [ ] アーキテクチャ図の作成
- [ ] 貢献ガイドラインの作成

## 技術的負債

### 1. コードの整理

- [ ] 重複コードの削除
- [ ] モジュール構造の最適化
- [ ] 命名規則の統一

### 2. 依存関係の管理

- [ ] 不要な依存関係の削除
- [ ] セキュリティ脆弱性のチェック
- [ ] ライセンス互換性の確認

## 優先度

### 高優先度

1. 警告の修正
2. 形態素解析辞書の自動設定
3. 日本語処理の精度向上

### 中優先度

1. パフォーマンス最適化
2. テストの充実
3. エラーハンドリング改善

### 低優先度

1. 新機能の追加
2. UI/UX の改善
3. 多言語対応

## 完了済み ✅

- [x] 日本語テキストでの`split_whitespace`問題の解決
- [x] 行番号計算の修正
- [x] Vibrato を使った形態素解析機能の統合
- [x] 圧縮辞書ファイル（.zst）のサポート
- [x] 日本語文字の自動検出機能
- [x] 基本的な類似性検出の動作確認
- [x] コマンドラインインターフェースの実装
- [x] 重み付き類似性計算の実装
